<!DOCTYPE html>
<html lang="th">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobJub</title>
    <style>
        :root {
            --color-background: #121212; /* Darker than design for more pop */
            --color-surface: #1E1E2D;   /* Card Background */
            --color-primary-text: #F0F0F5;
            --color-secondary-text: #AAB2C1;
            --color-accent: #BB86FC;
            --color-accent-hover: #9f65e4;
            --color-error: #CF6679;
            --color-success: #03DAC6;
            --color-border: #4A4A6A;
            --input: #454545;
        }
        body {
            margin: 0px;
            background-color: var(--color-background);
        }
        #warning {
            opacity: 1; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏∂‡∏ö‡πÅ‡∏™‡∏á 100% */
            transition: opacity 1s ease-out; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ */
        }
        #warning.fade-out {
            opacity: 0 !important;
            pointer-events: none;
        }
        .screen {
            background-color: black;
            color: var(--color-primary-text);
            font-family: trebuchet ms;
            text-align: center;
            justify-content: center;
            z-index: 2;
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
        #WARNING {
            font-size: 80px;
        }
        #gemini {
            font-family: trebuchet ms;
            color: var(--color-primary-text);
            overflow: auto;
            transition: max-height 0.3s ease-out;
            max-height: 750px;
            max-width: 900px;
            margin: 30px;
            padding: 10px;
        }
        #promptInput {
                font-family: trebuchet ms;
                font-size: larger;
                color: var(--color-primary-text);
                background-color: var(--input);
                border-radius: 15px;
                border: none;
                text-align: center;
                position: fixed;
                box-shadow: 0.5px 0.5px 10px 0.5px rgba(255, 255, 255, 0.664);
        }
        #enter {
            font-family: trebuchet ms;
            font-size: x-large;
            color: var(--color-primary-text);
            background-color: var(--input);
            border-radius: 15px;
            border: none;
            width: 71.50px;
            box-shadow: 0.5px 0.5px 10px 0.5px rgba(255, 255, 255, 0.664);
        }
        #promptImage {
            color: var(--color-background);
        }
        ::file-selector-button {
            position: absolute;
            bottom: 90px;
            right: 30px;
            width: 71.50px;
            height: 40px;
            border: none;
            padding: 5px 10px;
            border-radius: 15px;
            background-color: var(--input);
            color: var(--color-primary-text);
            font-family: trebuchet ms;
            box-shadow: 0.5px 0.5px 10px 0.5px rgba(255, 255, 255, 0.664);
        }
        #you {
            font-family: trebuchet ms;
            color: var(--color-primary-text);
            overflow: auto;
            max-height: 300px;
            max-width: 900px;
            position: absolute;
            right: 30px;
            top: 50px;
            padding: 10px;
            display: none;
        }
        #Patch {
            border: solid 0.5px white;
            text-align: center;
            justify-content: center;
            width: 500px;
            height: 700px;
            border-radius: 10px;
            font-family: Trebuchet MS;
            color: white;
            display: block;
            position: absolute;
            left: 700px;
        }
        #exit {
            background: none;
            border: none;
            color: #CF6679;
            font-size: x-large;
            position: absolute;
            right: 5px;
        }
        #exit:hover {
            color: #cc3450;
        }
        @media only screen and (max-width: 320px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                height: 40px;
                width: 150px;
                font-size: medium;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
            #WARNING {
                font-size: 50px;
            }
        }
        @media only screen and (min-width: 320px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                height: 40px;
                width: 150px;
                font-size: medium;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
            #WARNING {
                font-size: 50px;
            }
        }
        @media only screen and (min-width: 480px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                height: 40px;
                width: 300px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 600px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 430px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 768px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 600px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 900px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 700px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 1024px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 850px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 1200px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 1000px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 1300px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 1170px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 1620px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 1430px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @media only screen and (min-width: 1900px) {
            #promptInput {
                position: absolute;
                bottom: 30px;
                left: 30px;
                width: 1730px;
                height: 40px;
            }
            #enter {
                position: absolute;
                bottom: 30px;
                right: 30px;
                height: 40px;
            } 
        }
        @keyframes fade-out {
            from {opacity: 1;}
            to {opacity: 0;}
        }
    </style>
</head>
<body>

    <div id="warning">
        <div class="screen">
            <strong>
                <h1 id="WARNING">‚ö†Ô∏èWARNING</h1>
            </strong>
            <h2>‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ai ‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÅ‡∏•‡∏∞‡∏û‡∏≠‡∏î‡∏µ</h2>
        </div>
    </div>

    <form id="chatForm"> 
        <input type="text" id="promptInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...">

        <input type="file" accept="image/*" id="promptImage">
        
        <button type="submit" id="enter"><img src="https://icons.veryicon.com/png/o/miscellaneous/utility/send-26.png" width="30px" height="35px"></button>
    </form>

    <!--<a href="page1.html"><img src="https://img.icons8.com/fluent-systems-regular/512/FFFFFF/info.png"  width="35px" height="35px" style="position: absolute; left: 50px; top: 130px;"></a>-->

    <div id="gemini">
        <p id="yo">Hello.</p>
    </div>

    <div id="user" class="user">
        <!--<p id="profile">You:</p>-->
        <p id="you">not</p>
    </div>

    <!--<div id="Patch" class="Patch">
        <button id="exit" class="exit" onclick="close()" type="submit">X</button>
        <h1>Patch Update</h1>
        <h2>Version 0.1.0</h2>
        <h2>Note Patch:</h2>
        !------‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó--------
    </div> -->

    <script>
        var i = 0;
        document.getElementById('yo').innerHTML = 'Hello.';

        setTimeout(() => {
            document.getElementById('yo').innerHTML = "Tell me about you.";
        }, 10000);
        
        
        // ‚úÖ ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö Event
        async function sendPrompt(event) {
            
            // üí° ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Submit
            event.preventDefault(); 
            
            const promptInput = document.getElementById('promptInput');
            const promptImage = document.getElementById('promptImage');
            const responseText = document.getElementById('yo');
            const user = document.getElementById('you');
            
            // ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ User Prompt ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
            const userPrompt = promptInput.value; 
            const ImagePrompt = promptImage.files[0];

            if (!userPrompt && !ImagePrompt) {
                responseText.innerText = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°'; // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô alert
                return;
            }

            if (userPrompt != !userPrompt) {
                user.style.display = "block";
                user.innerHTML = userPrompt;
            }
            
            responseText.innerText = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°... ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà';

            const formData = new FormData();
            formData.append('userPrompt', userPrompt);
            if (ImagePrompt) {
                formData.append('imageFile', ImagePrompt); // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
            }

            try {
                // ‚úÖ ‡πÇ‡∏Ñ‡πâ‡∏î fetch API: POST ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á JSON body
                const response = await fetch('http://127.0.0.1:5001/ask', { 
                    method: 'POST',
                    body: formData
                }); 
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
                if (!response.ok) {
                    const errorData = await response.json(); 
                    throw new Error(errorData.error || `HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                
                // ‡∏ô‡∏≥‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
                responseText.innerText = data.text; 
                promptInput.value = ''; 

            } catch (error) {
                console.error('Fetch error:', error);
                responseText.innerText = '‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Server ‡∏´‡∏£‡∏∑‡∏≠ API: ' + error.message;
            }
        }

         document.getElementById('chatForm').addEventListener('submit', sendPrompt);

         window.onload = function() {
            setTimeout(function() {
                var element = document.getElementById('warning');
                element.classList.add('fade-out');
            }, 6000); // ‡∏£‡∏≠ 6000 ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (6 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
        };
        /*
            const some = document.getElementById("language");
            const thing = some.value
            const firt = document.getElementById("Title");
            const second = document.getElementById("idk");
            const third = document.getElementById("gemini");

            function change() {

                if (thing === 'en') {
                        firt.innerText = "Ask Gemini now !";
                        second.innerText = "Answer from Gemini:";
                        third.innerText = "Waiting for talk...";
                } else {
                        
                }
            }
        */
    </script>
</body>
</html>